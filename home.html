<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Sins of the Past — Home</title>

  <!-- Performance: fonts + hero preload -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="preload" as="image" href="assets/Sinsbg.png">

  <!-- Shared site styles -->
  <link rel="stylesheet" href="css/base.css?v=2">

  <style>
    /* ===== Cursor dot (optional) ===== */
    .cursor{
      position:fixed; left:0; top:0; width:16px; height:16px;
      border-radius:50%; outline:2px solid var(--acid, #00e0c6);
      opacity:.5; transform:translate(-50%,-50%); z-index:9999; pointer-events:none;
    }

    /* ===== Page background subtle texture ===== */
    body.page-home{
      background:
        radial-gradient(1200px 600px at 50% -200px, rgba(255,255,255,.04), transparent 60%),
        url('assets/Sinsbg.jpg') center/auto repeat,
        var(--bg);
    }

    /* ===== HERO ===== */
    .hero{
      position: relative;
      min-height: 68vh;
      display: grid;
      place-items: center;
      text-align: center;
      padding: 8rem 1.25rem;
      color: var(--ink);
      background:
        linear-gradient(to bottom, rgba(10,11,15,.35), rgba(10,11,15,.75)),
        url('assets/Sinsbg.png') center/cover no-repeat;
      transition: background-image .6s ease; /* smooth swap when we rotate */
    }
    .hero .inner{ max-width: 820px }

    /* ===== Campaign banner slice ===== */
    .banner{ position:relative; margin:48px 0 }
    .banner img{
      display:block; width:100%; height:48vw; max-height:520px; object-fit:cover;
    }

    /* ===== Product grid image treatment ===== */
    .card .img{
      aspect-ratio: 4/5;
      background:#0f1117;
      border-radius:16px;
      overflow:hidden;
      display:block;
    }
    .card .img img{ width:100%; height:100%; object-fit:cover; display:block }

    /* ===== Card hover tilt (CSS-only) ===== */
    .card.tilt{
      transition: transform .2s ease, box-shadow .2s ease;
      will-change: transform;
    }
    .card.tilt:hover{
      transform: translateY(-2px) rotate3d(.5,1,0, 2deg);
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }

    /* ===== Section reveal ===== */
    .reveal{ opacity:0; transform:translateY(12px); transition:opacity .5s ease, transform .5s ease; }
    .reveal.show{ opacity:1; transform:none; }

    /* ===== Small utilities ===== */
    .sr-only{ position:absolute!important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); border:0; }

    /* ===== Reduced motion: disable animations ===== */
    @media (prefers-reduced-motion: reduce) {
      .hero{ transition:none; }
      .card.tilt{ transition:none; }
      .card.tilt:hover{ transform:none; box-shadow:none; }
      .reveal{ transition:none; opacity:1; transform:none; }
      .cursor{ display:none; }
    }

    /* Background-filled variants if you use empty .img divs (not used here) */
    .card.maniac-smiler-sapphire-tee .img{
      background: url('assets/Maniac Smiler Sapphire tee.png') center/cover no-repeat;
    }
    .card.scythe-hoodie .img{
      background: url('assets/scythe-hoodie.jpg') center/cover no-repeat;
    }

    /* Tiny bump on cart count update */
    #cartCount.bump{ animation:bump .35s ease; }
    @keyframes bump{ 0%{transform:scale(1)} 50%{transform:scale(1.2)} 100%{transform:scale(1)} }
  </style>
</head>

<body class="page-home">
  <!-- theme + greet as early as possible -->
  <script>
  (function(){
    const acid = localStorage.getItem('stp_theme_acid');
    const hot  = localStorage.getItem('stp_theme_hot');
    if (acid) document.documentElement.style.setProperty('--acid', acid);
    if (hot)  document.documentElement.style.setProperty('--hot',  hot);
    window.addEventListener('DOMContentLoaded', () => {
      const sin = (localStorage.getItem('stp_sin') || '').trim();
      const el  = document.getElementById('sin-greet');
      if (!el) return;
      if (sin && sin.toLowerCase() !== 'none') {
        el.textContent = `welcome back — last time you confessed: ${sin}`;
        el.style.display = '';
      } else {
        el.remove();
      }
    });
  })();
  </script>

  <a href="#main" class="sr-only">Skip to content</a>

  <header class="header" role="banner">
    <a class="brand" href="home.html" aria-label="Sins of the Past home">
      <img src="assets/lgo.png" alt="" width="28" height="28" onerror="this.style.display='none'">
      <span>Sins of the Past</span>
    </a>
    <nav class="nav" aria-label="Primary">
      <a href="home.html" class="active" aria-current="page">Home</a>
      <a href="shop.html">Shop</a>
      <a href="about.html">About</a>
      <a href="arcade.html">Arcade</a>
      <a href="contact.html">Contact</a>
      <a href="care.html">Care</a>
    </nav>
    <a href="cart.html" id="cartLink" aria-label="View cart">
      Cart <span id="cartCount" aria-live="polite" aria-atomic="true" style="opacity:.8"></span>
    </a>
  </header>

  <!-- HERO -->
  <section class="hero" id="main">
    <div class="inner reveal">
      <h1>AVAILABLE NOW</h1>
      <p id="sin-greet" class="muted" style="display:none;margin:-6px 0 14px"></p>
      <p class="muted">Art, apparel & jewelry with a dark, playful edge.</p>
      <a href="shop.html" class="btn primary">Shop the drop</a>
      <a href="arcade.html" class="btn" style="margin-left:10px">Play to unlock</a>
    </div>
  </section>

  <!-- MARQUEE -->
  <div class="marquee" aria-hidden="true">
    <div class="track"><span>★ LIMITED RUN ★ HANDMADE ★ SMALL BATCH ★ NO RESTOCKS ★</span><span>★ LIMITED RUN ★ HANDMADE ★ SMALL BATCH ★ NO RESTOCKS ★</span></div>
    <div class="track"><span>★ LIMITED RUN ★ HANDMADE ★ SMALL BATCH ★ NO RESTOCKS ★</span><span>★ LIMITED RUN ★ HANDMADE ★ SMALL BATCH ★ NO RESTOCKS ★</span></div>
  </div>

  <!-- CAMPAIGN BANNER -->
  <section class="banner reveal">
    <img src="assets/DualityofPastandFuture.png" alt="AW25 campaign still — duality series"
         width="2400" height="900" loading="lazy" decoding="async">
  </section>

  <!-- PRODUCTS -->
  <section class="section reveal">
    <h2>Featured</h2>
    <div class="grid">
      <!-- Maniac Smiler Tee -->
      <article class="card tilt">
        <a href="ManiacSmilerSapphiretee.html" class="img" aria-label="View Maniac Smiler Tee">
          <img
            src="assets/ManiacSmilerSapphiretee.png"
            alt="Maniac Smiler Sapphire Tee"
            width="640" height="800"
            loading="lazy" decoding="async">
        </a>
        <div class="meta">
          <h3>Maniac Smiler Sapphire Tee</h3>
          <p class="muted">Heavyweight & oversized</p>
          <div class="buy">
            <span class="price">$250</span>
            <button class="btn small add-to-bag"
              data-sku="tee-maniac-smiler-sapphire"
              data-name="Maniac Smiler Sapphire Tee"
              data-price="250"
              data-url="ManiacSmilerSapphiretee.html">Add to Bag</button>
          </div>
        </div>
      </article>

      <!-- Vice Link Charm Chain -->
      <article class="card tilt">
        <a href="vice-link-chain.html" class="img" aria-label="View Vice Link Charm Chain">
          <img
            src="assets/reaperscythe.png"
            alt="Vice Link Charm Chain"
            width="640" height="800"
            loading="lazy" decoding="async">
        </a>
        <div class="meta">
          <h3>Vice Link Charm Chain</h3>
          <p class="muted">925 silver</p>
          <div class="buy">
            <span class="price">$120</span>
            <button class="btn small add-to-bag"
              data-sku="chain-vice-link"
              data-name="Vice Link Charm Chain"
              data-price="120"
              data-url="vice-link-chain.html">Add to Bag</button>
          </div>
        </div>
      </article>

      <!-- Scythe Hoodie -->
      <article class="card tilt">
        <a href="scythe-hoodie.html" class="img" aria-label="View Scythe Hoodie">
          <img
            src="assets/scythehoodie.png"
            alt="Scythe Hoodie"
            width="640" height="800"
            loading="lazy" decoding="async">
        </a>
        <div class="meta">
          <h3>Scythe Hoodie</h3>
          <p class="muted">500gsm fleece</p>
          <div class="buy">
            <span class="price">$85</span>
            <button class="btn small add-to-bag"
              data-sku="hoodie-scythe"
              data-name="Scythe Hoodie"
              data-price="85"
              data-url="scythe-hoodie.html">Add to Bag</button>
          </div>
        </div>
      </article>
    </div>
  </section>

  <footer class="footer">© <span id="y"></span> Sins of the Past</footer>

  <!-- Site JS -->
  <script type="module" src="app.js" defer></script>

  <!-- Optional follower dot -->
  <div class="cursor"></div>
  <script>
    // ===== Cursor follower (disabled on touch)
    (function(){
      const cursor = document.querySelector('.cursor');
      const coarse = window.matchMedia('(pointer: coarse)').matches;
      if (!cursor || coarse) { if (cursor) cursor.remove(); return; }
      document.addEventListener('mousemove', e => {
        cursor.style.left = e.clientX + 'px';
        cursor.style.top  = e.clientY + 'px';
      }, {passive:true});
    })();

    // ===== Footer year
    (function(){
      const y = document.getElementById('y');
      if (y) y.textContent = new Date().getFullYear();
    })();

    // ===== Rotate hero art per-visit (smooth; respects reduced motion)
    (function rotateHero(){
      const hero = document.querySelector('.hero');
      if (!hero) return;
      const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const picks = ['assets/Sinsbg.png','assets/sinsbgg.png','assets/mngs.png'];
      const src = picks[Math.floor(Math.random()*picks.length)];
      if (reduced) {
        hero.style.background = `linear-gradient(to bottom, rgba(10,11,15,.35), rgba(10,11,15,.75)), url('${src}') center/cover no-repeat`;
        return;
      }
      // pre-swap for smooth transition
      const img = new Image();
      img.onload = () => {
        hero.style.background = `linear-gradient(to bottom, rgba(10,11,15,.35), rgba(10,11,15,.75)), url('${src}') center/cover no-repeat`;
      };
      img.src = src;
    })();

    // ===== Reveal on scroll (cards/banner/hero inner)
    (function revealOnScroll(){
      const els = document.querySelectorAll('.reveal');
      if (!els.length) return;
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
          if (e.isIntersecting) {
            e.target.classList.add('show');
            io.unobserve(e.target);
          }
        });
      }, {threshold: .1, rootMargin: '100px'});
      els.forEach(el=> io.observe(el));
    })();

    // ===== Minimal cart logic (localStorage)
    (function cart(){
      const CART_KEY = 'stp_cart';
      const countEl = document.getElementById('cartCount');

      function load(){ try { return JSON.parse(localStorage.getItem(CART_KEY) || '[]'); } catch { return []; } }
      function save(items){ localStorage.setItem(CART_KEY, JSON.stringify(items)); }
      function updateCount(){
        const n = load().reduce((sum,i)=> sum + (i.qty||1), 0);
        if (countEl){
          countEl.textContent = n ? `(${n})` : '';
          countEl.classList.remove('bump');
          // trigger bump
          void countEl.offsetWidth; countEl.classList.add('bump');
        }
      }
      function addItem({sku,name,price,url}){
        const items = load();
        const found = items.find(i=> i.sku===sku);
        if (found) found.qty = (found.qty||1)+1;
        else items.push({sku,name,price:Number(price),url,qty:1, addedAt:Date.now()});
        save(items); updateCount();
      }

      // wire buttons
      document.querySelectorAll('.add-to-bag').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          addItem({
            sku: btn.dataset.sku,
            name: btn.dataset.name,
            price: btn.dataset.price,
            url: btn.dataset.url
          });
        });
      });

      // init count
      updateCount();
    })();
  </script>

  <p class="muted" style="text-align:center;margin:6px 0 16px">
    Footwear handcrafted in Le Marche, Italy — The Shoe Valley (since 1901).
  </p>
</body>
</html>
